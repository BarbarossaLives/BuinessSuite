{% extends "base.html" %}
{% block title %}Create Project{% endblock %}
{% block content %}
<div class="container py-5">
  <h2 class="mb-4">Create Project</h2>
  <form method="post" action="/create-project" id="project-form">
    <div class="mb-3">
      <label class="form-label">Project Name</label>
      <input type="text" class="form-control" name="name" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Description</label>
      <textarea class="form-control" name="description"></textarea>
    </div>
    <hr>
    <h4>Tasks</h4>
    <div id="tasks-container"></div>
    <button type="button" class="btn btn-secondary mb-3" onclick="addTask()">Add Task</button>
    <hr>
    <button type="submit" class="btn btn-primary">Create Project</button>
    <a href="/daily" class="btn btn-secondary ms-2">Cancel</a>
  </form>
</div>
<script>
let taskCount = 0;
function addTask(task={}) {
  const container = document.getElementById('tasks-container');
  const idx = taskCount++;
  const div = document.createElement('div');
  div.className = 'card mb-3 p-3';
  div.innerHTML = `
    <div class="mb-2"><strong>Task #${idx+1}</strong></div>
    <div class="mb-2">
      <input type="text" class="form-control" name="tasks-${idx}-name" placeholder="Task Name" value="${task.name||''}" required>
    </div>
    <div class="mb-2">
      <textarea class="form-control" name="tasks-${idx}-description" placeholder="Description">${task.description||''}</textarea>
    </div>
    <div class="mb-2">
      <input type="date" class="form-control" name="tasks-${idx}-due_date" value="${task.due_date||''}">
    </div>
    <div class="form-check mb-2">
      <input class="form-check-input" type="checkbox" name="tasks-${idx}-completed" id="tasks-${idx}-completed" ${task.completed ? 'checked' : ''}>
      <label class="form-check-label" for="tasks-${idx}-completed">Completed</label>
    </div>
    <button type="button" class="btn btn-danger btn-sm" onclick="this.parentElement.remove()">Remove Task</button>
  `;
  container.appendChild(div);
}
</script>
{% endblock %} 